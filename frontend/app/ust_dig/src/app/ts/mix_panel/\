import postgres from 'postgres';
import { unstable_noStore as noStore } from 'next/cache';

const sql = postgres({
	host: '10.1.0.20',            // Postgres ip address[s] or domain name[s]
	port: 5432,          // Postgres server port[s]
	database: 'db',            // Name of database to connect to
	username: 'changeme',            // Username of database user
	password: 'changeme',            // Password of database user
})

export async function fetchTest() {
	noStore();

	try {
		const data = await sql`SELECT * FROM "mix" LIMIT 50`;
		return data.rows;
	} catch (error) {
		console.error('Database Error:', error)
		throw new Error('Failed to fetch revenue data.');
	}
};
